<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chat Room</title>
</head>
<body>
<h1 th:text="${chatRoom.name}"></h1>

<div>
    <!-- 채팅 내용 표시 -->
    <ul>
        <!-- 반복문을 사용하여 채팅 메시지 출력 -->
        <!-- 예제 데이터 구조: chatRoom.messages 안에 메시지 리스트가 있다고 가정 -->
        <li th:each="message : ${chatRoom.messages}">
            <span th:text="${message.sender}"></span>:
            <span th:text="${message.content}"></span>
        </li>
    </ul>
</div>

<!-- 메시지 입력 폼 -->
<form id="messageForm">
    <input type="text" id="messageInput" placeholder="Type your message..." />
    <button type="submit">Send</button>
</form>

<script src="/your-socket-io-library.js"></script> <!-- Socket.io 라이브러리 불러오기 -->
<script>
    // Socket.io를 사용하여 메시지 전송 로직을 작성 (서버와 통신)
    var socket = io('/topic/messages'); // 서버의 브로드캐스트 경로와 연결
    var messageForm = document.getElementById('messageForm');
    var messageInput = document.getElementById('messageInput');

    messageForm.addEventListener('submit', function(event) {
        event.preventDefault();
        var message = messageInput.value;
        socket.emit('sendMessage', message); // sendMessage 이벤트 발송
        messageInput.value = ''; // 입력 필드 비우기
    });

    // 채팅 메시지를 받아서 화면에 추가하는 코드
    socket.on('message', function(message) {
        var messageList = document.querySelector('ul');
        var messageItem = document.createElement('li');
        messageItem.textContent = message;
        messageList.appendChild(messageItem);
    });
</script>
</body>
</html>
